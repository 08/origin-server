#!/bin/bash -e
set -x

# Set default version
version=1.9
<<<<<<< HEAD
=======

while :
do
    case $1 in
        -h | --help | -\?)
            echo "usage: $0 [--version[=]<value>]"
            exit 0
            ;;
        -v | --version)
            version=$2     # You might want to check if you really got VERSION
            shift 2
            ;;
        --version=*)
            version=${1#*=}        # Delete everything up till "="
            shift
            ;;
        --) # End of all options
            shift
            break
            ;;
        -*)
            echo "WARN: Unknown option... Exiting: $1" >&2
            exit 1
            ;;
        *)  # no more options. Stop while loop
            break
            ;;
    esac
done

# Don't set -u until after the above arg parsing is complete
set -u

ls -lZa $OPENSHIFT_HOMEDIR/ruby
id
>>>>>>> Added setup parsing

# Copy the version specific files to ruby directory
for dir in etc metadata template; do
	mkdir -p $OPENSHIFT_RUBY_DIR/$dir
	cp -r $OPENSHIFT_RUBY_DIR/versions/$version/$dir/* $OPENSHIFT_RUBY_DIR/$dir 
done

# Create additional directories required by RUBY and httpd
ln -s /usr/lib64/httpd/modules $OPENSHIFT_RUBY_DIR
ln -s /etc/httpd/conf/magic $OPENSHIFT_RUBY_DIR/etc/magic

